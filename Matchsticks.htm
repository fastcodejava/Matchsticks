<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Matchsticks Puzzle Solver</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 50px;
    }
    label, select, input {
      font-size: 16px;
      margin: 10px 0;
      display: block;
    }
  </style>
</head>
<body>
  <h2>Matchsticks Puzzle Solver</h2>
  <label for="textbox">Enter a wrong matchsticks equation:</label>
  <input type="text" id="textbox" placeholder="Type something..." />

  <label for="dropdown">Matchsticks to move :</label>
  <select id="dropdown">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
  </select>

  Show Instructions: <input type="checkbox" id="instructions" name="instructions">

  <button onclick="solvePuzzle()">Submit</button>
  <button onclick="copyText()">Copy</button>

	<br \>
	<br \>
  <!--p id="output"></p-->
  <textarea id="output" rows="30" cols="50"></textarea>

  <script>
	let identity = [{
			"destination": null,
			"add": null,
			"move": null
		}];

	//const SUPERSCRIPT1 = "<sup>1</sup>";
//	const superscripts = {
//	"0": "⁰", "1": "¹", "2": "²", "3": "³", "4": "⁴",
//	"5": "⁵", "6": "⁶", "7": "⁷", "8": "⁸", "9": "⁹"
//	};
	const SUPERSCRIPT1 = "¹";
	const PLUS = "+";
	const MINUS = "-";
	const MULTIPLICATION = "x";
    const DIVISION = "/";
    const EQUAL = "=";
    const SPACE = " ";
    let conf = {
      "0": [
        {
          "destination": "3",
          "add": -1,
          "move": 1
        },
        {
          "destination": "5",
          "add": -1,
          "move": 1
        },
        {
          "destination": "2",
          "add": -1,
          "move": 1
        },
        {
          "destination": "8",
          "add": 1,
          "move": 0
        },
        {
          "destination": "9",
          "add": 0,
          "move": 1
        },
        {
          "destination": "6",
          "add": 0,
          "move": 1
        },
        {
          "destination": "10",
          "add": 2,
          "move": 0
        },
        {
          "destination": "11",
          "add": -2,
          "move": 0
        },
        {
          "destination": "7",
          "add": -3,
          "move": 0
        },
        {
          "destination": "4",
          "add": -2,
          "move": 1
        }
      ],
      "1": [
        {
          "destination": "3",
          "add": 3,
          "move": 0
        },
        {
          "destination": "7",
          "add": 1,
          "move": 0
        },
        {
          "destination": "4",
          "add": 2,
          "move": 0
        },
        {
          "destination": "11",
          "add": 2,
          "move": 0
        },
        {
          "destination": "3",
          "add": 3,
          "move": 0
        },
        {
          "destination": "0",
          "add": 4,
          "move": 0
        },
        {
          "destination": "9",
          "add": 4,
          "move": 0
        },
        {
          "destination": null,
          "add": -2,
          "move": 0
        }
      ],
      "2": [
        {
          "destination": "0",
          "add": 1,
          "move": 1
        },
        {
          "destination": "5",
          "add": 0,
          "move": 2
        },
        {
          "destination": "3",
          "add": 0,
          "move": 1
        },
        {
          "destination": "6",
          "add": 1,
          "move": 1
        },
        {
          "destination": "0",
          "add": 1,
          "move": 1
        },
        {
          "destination": "8",
          "add": 2,
          "move": 0
        },
        {
          "destination": "9",
          "add": 1,
          "move": 1
        },
        {
          "destination": "12",
          "add": 2,
          "move": 0
        },
        {
          "destination": "1",
          "add": -3,
          "move": 1
        },
        {
          "destination": "4",
          "add": -1,
          "move": 2
        },
        {
          "destination": "7",
          "add": -2,
          "move": 1
        },
        {
          "destination": "7",
          "add": -2,
          "move": 1
        },
        {
          "destination": "11",
          "add": -1,
          "move": 2
        }
      ],
      "3": [
        {
          "destination": "0",
          "add": 1,
          "move": 1
        },
        {
          "destination": "5",
          "add": 0,
          "move": 1
        },
        {
          "destination": "0",
          "add": 1,
          "move": 1
        },
        {
          "destination": "2",
          "add": 0,
          "move": 1
        },
        {
          "destination": "4",
          "add": -1,
          "move": 1
        },
        {
          "destination": "6",
          "add": 1,
          "move": 1
        },
        {
          "destination": "7",
          "add": -2,
          "move": 0
        },
        {
          "destination": "8",
          "add": 2,
          "move": 0
        },
        {
          "destination": "9",
          "add": 1,
          "move": 0
        },
        {
          "destination": "13",
          "add": 2,
          "move": 0
        },
        {
          "destination": "1",
          "add": -3,
          "move": 0
        },
        {
          "destination": "11",
          "add": -1,
          "move": 2
        }
      ],
      "4": [
        {
          "destination": "11",
          "add": 0,
          "move": 1
        },
        {
          "destination": "0",
          "add": 2,
          "move": 1
        },
        {
          "destination": "1",
          "add": -2,
          "move": 0
        },
        {
          "destination": "3",
          "add": 1,
          "move": 1
        },
        {
          "destination": "2",
          "add": 1,
          "move": 2
        },
        {
          "destination": "5",
          "add": 1,
          "move": 1
        },
        {
          "destination": "7",
          "add": -1,
          "move": 1
        },
        {
          "destination": "9",
          "add": 2,
          "move": 0
        },
        {
          "destination": "14",
          "add": 2,
          "move": 0
        },
        {
          "destination": "0",
          "add": 2,
          "move": 1
        },
        {
          "destination": "2",
          "add": 1,
          "move": 2
        },
        {
          "destination": "6",
          "add": 2,
          "move": 1
        },
        {
          "destination": "8",
          "add": 3,
          "move": 0
        },
        {
          "destination": "11",
          "add": 2,
          "move": 1
        }
      ],
      "5": [
        {
          "destination": "0",
          "add": 1,
          "move": 1
        },
        {
          "destination": "2",
          "add": 0,
          "move": 2
        },
        {
          "destination": "3",
          "add": 0,
          "move": 1
        },
        {
          "destination": "4",
          "add": -1,
          "move": 1
        },
        {
          "destination": "6",
          "add": 1,
          "move": 0
        },
        {
          "destination": "7",
          "add": -2,
          "move": 1
        },
        {
          "destination": "8",
          "add": 2,
          "move": 0
        },
        {
          "destination": "9",
          "add": 1,
          "move": 0
        },
        {
          "destination": "15",
          "add": 2,
          "move": 0
        },
        {
          "destination": "7",
          "add": -2,
          "move": 1
        },
        {
          "destination": "1",
          "add": -3,
          "move": 1
        },
        {
          "destination": "11",
          "add": -1,
          "move": 2
        }
      ],
      "6": [
        {
          "destination": "0",
          "add": 0,
          "move": 1
        },
        {
          "destination": "3",
          "add": -1,
          "move": 1
        },
        {
          "destination": "2",
          "add": -1,
          "move": 1
        },
        {
          "destination": "5",
          "add": -1,
          "move": 0
        },
        {
          "destination": "8",
          "add": 1,
          "move": 0
        },
        {
          "destination": "9",
          "add": 0,
          "move": 1
        },
        {
          "destination": "15",
          "add": 1,
          "move": 1
        },
        {
          "destination": "16",
          "add": 2,
          "move": 0
        },
        {
          "destination": "4",
          "add": -2,
          "move": 1
        },
        {
          "destination": "7",
          "add": -3,
          "move": 1
        },
        {
          "destination": "1",
          "add": -4,
          "move": 0
        },
        {
          "destination": "1",
          "add": -3,
          "move": 1
        },
        {
          "destination": "11",
          "add": -2,
          "move": 1
        }
      ],
      "7": [
        {
          "destination": "1",
          "add": -1,
          "move": 0
        },
        {
          "destination": "3",
          "add": 2,
          "move": 0
        },
        {
          "destination": "4",
          "add": 1,
          "move": 1
        },
        {
          "destination": "11",
          "add": 1,
          "move": 1
        },
        {
          "destination": "17",
          "add": 2,
          "move": 0
        },
        {
          "destination": "9",
          "add": 3,
          "move": 0
        },
        {
          "destination": "0",
          "add": 3,
          "move": 0
        }
      ],
      "8": [
        {
          "destination": "0",
          "add": -1,
          "move": 0
        },
        {
          "destination": "5",
          "add": -2,
          "move": 0
        },
        {
          "destination": "2",
          "add": -2,
          "move": 0
        },
        {
          "destination": "3",
          "add": -2,
          "move": 0
        },
        {
          "destination": "6",
          "add": -1,
          "move": 0
        },
        {
          "destination": "9",
          "add": -1,
          "move": 0
        },
        {
          "destination": "10",
          "add": 1,
          "move": 1
        },
        {
          "destination": "12",
          "add": 0,
          "move": 2
        },
        {
          "destination": "13",
          "add": 0,
          "move": 2
        },
        {
          "destination": "15",
          "add": 0,
          "move": 2
        },
        {
          "destination": "16",
          "add": 1,
          "move": 1
        },
        {
          "destination": "18",
          "add": 2,
          "move": 0
        },
        {
          "destination": "19",
          "add": 1,
          "move": 1
        },
        {
          "destination": "4",
          "add": -3,
          "move": 0
        },
        {
          "destination": "11",
          "add": -3,
          "move": 0
        }
      ],
      "9": [
        {
          "destination": "0",
          "add": 0,
          "move": 1
        },
        {
          "destination": "3",
          "add": -1,
          "move": 0
        },
        {
          "destination": "2",
          "add": -1,
          "move": 1
        },
        {
          "destination": "4",
          "add": -2,
          "move": 0
        },
        {
          "destination": "5",
          "add": -1,
          "move": 0
        },
        {
          "destination": "6",
          "add": 0,
          "move": 1
        },
        {
          "destination": "8",
          "add": 1,
          "move": 0
        },
        {
          "destination": "13",
          "add": 1,
          "move": 1
        },
        {
          "destination": "15",
          "add": 1,
          "move": 1
        },
        {
          "destination": "14",
          "add": 0,
          "move": 2
        },
        {
          "destination": "19",
          "add": 2,
          "move": 0
        },
        {
          "destination": "7",
          "add": -3,
          "move": 0
        },
        {
          "destination": "1",
          "add": -4,
          "move": 0
        },
        {
          "destination": "11",
          "add": -2,
          "move": 1
        }
      ],
      "10": [
        {
          "destination": "0",
          "add": -2,
          "move": 0
        },
        {
          "destination": "8",
          "add": -1,
          "move": 1
        },
        {
          "destination": "0",
          "add": -2,
          "move": 0
        }
      ],
      "11": [
        {
          "destination": "4",
          "add": 0,
          "move": 1
        },
        {
          "destination": "7",
          "add": -1,
          "move": 1
        },
        {
          "destination": "0",
          "add": 2,
          "move": 0
        },
        {
          "destination": "1",
          "add": -2,
          "move": 0
        },
        {
          "destination": "-1",
          "add": -1,
          "move": 1
        }
      ],
      "12": [
        {
          "destination": "8",
          "add": 0,
          "move": 2
        },
        {
          "destination": "6",
          "add": -1,
          "move": 2
        },
        {
          "destination": "9",
          "add": -1,
          "move": 2
        },
        {
          "destination": "6",
          "add": -1,
          "move": 2
        },
        {
          "destination": "9",
          "add": -1,
          "move": 2
        }
      ],
      "13": [
        {
          "destination": "9",
          "add": -1,
          "move": 1
        },
        {
          "destination": "8",
          "add": 0,
          "move": 2
        },
        {
          "destination": "6",
          "add": -1,
          "move": 2
        },
        {
          "destination": "6",
          "add": -1,
          "move": 2
        }
      ],
      "14": [
        {
          "destination": "9",
          "add": 0,
          "move": 2
        },
        {
          "destination": "5",
          "add": -1,
          "move": 2
        },
        {
          "destination": "5",
          "add": -1,
          "move": 2
        }
      ],
      "15": [
        {
          "destination": "6",
          "add": -1,
          "move": 1
        },
        {
          "destination": "9",
          "add": -1,
          "move": 1
        }
      ],
      "16": [
        {
          "destination": "8",
          "add": -1,
          "move": 1
        }
      ],
      "17": [
        {
          "destination": "11",
          "add": -1,
          "move": 2
        },
        {
          "destination": "4",
          "add": -1,
          "move": 1
        },
        {
          "destination": "11",
          "add": -1,
          "move": 2
        }
      ],
      "18": [
        {
          "destination": "8",
          "add": -2,
          "move": 0
        }
      ],
      "19": [
        {
          "destination": "8",
          "add": -1,
          "move": 1
        },
        {
          "destination": "9",
          "add": -2,
          "move": 0
        }
      ],
      "20": [
        {
          "destination": "30",
          "add": 0,
          "move": 1
        },
        {
          "destination": "50",
          "add": 0,
          "move": 2
        }
      ],
      "21": [
        {
          "destination": "31",
          "add": 0,
          "move": 1
        },
        {
          "destination": "51",
          "add": 0,
          "move": 2
        }
      ],
      "22": [
        {
          "destination": "32",
          "add": 0,
          "move": 1
        },
        {
          "destination": "52",
          "add": 0,
          "move": 2
        }
      ],
      "23": [
        {
          "destination": "33",
          "add": 0,
          "move": 1
        },
        {
          "destination": "53",
          "add": 0,
          "move": 2
        }
      ],
      "24": [
        {
          "destination": "34",
          "add": 0,
          "move": 1
        },
        {
          "destination": "54",
          "add": 0,
          "move": 2
        }
      ],
      "25": [
        {
          "destination": "35",
          "add": 0,
          "move": 1
        },
        {
          "destination": "55",
          "add": 0,
          "move": 2
        }
      ],
      "26": [
        {
          "destination": "36",
          "add": 0,
          "move": 1
        },
        {
          "destination": "56",
          "add": 0,
          "move": 2
        }
      ],
      "27": [
        {
          "destination": "37",
          "add": 0,
          "move": 1
        },
        {
          "destination": "57",
          "add": 0,
          "move": 2
        }
      ],
      "28": [
        {
          "destination": "38",
          "add": 0,
          "move": 1
        },
        {
          "destination": "58",
          "add": 0,
          "move": 2
        }
      ],
      "29": [
        {
          "destination": "39",
          "add": 0,
          "move": 1
        },
        {
          "destination": "59",
          "add": 0,
          "move": 2
        }
      ],
      "30": [
        {
          "destination": "20",
          "add": 0,
          "move": 1
        },
        {
          "destination": "50",
          "add": 0,
          "move": 1
        },
        {
          "destination": "80",
          "add": 0,
          "move": 2
        }
      ],
      "31": [
        {
          "destination": "21",
          "add": 0,
          "move": 1
        },
        {
          "destination": "51",
          "add": 0,
          "move": 1
        },
        {
          "destination": "81",
          "add": 0,
          "move": 2
        }
      ],
      "32": [
        {
          "destination": "22",
          "add": 0,
          "move": 1
        },
        {
          "destination": "52",
          "add": 0,
          "move": 1
        },
        {
          "destination": "82",
          "add": 0,
          "move": 2
        }
      ],
      "33": [
        {
          "destination": "23",
          "add": 0,
          "move": 1
        },
        {
          "destination": "53",
          "add": 0,
          "move": 1
        },
        {
          "destination": "83",
          "add": 0,
          "move": 2
        }
      ],
      "34": [
        {
          "destination": "24",
          "add": 0,
          "move": 1
        },
        {
          "destination": "54",
          "add": 0,
          "move": 1
        },
        {
          "destination": "84",
          "add": 0,
          "move": 2
        }
      ],
      "35": [
        {
          "destination": "25",
          "add": 0,
          "move": 1
        },
        {
          "destination": "55",
          "add": 0,
          "move": 1
        },
        {
          "destination": "85",
          "add": 0,
          "move": 2
        }
      ],
      "36": [
        {
          "destination": "26",
          "add": 0,
          "move": 1
        },
        {
          "destination": "56",
          "add": 0,
          "move": 1
        },
        {
          "destination": "86",
          "add": 0,
          "move": 2
        }
      ],
      "37": [
        {
          "destination": "27",
          "add": 0,
          "move": 1
        },
        {
          "destination": "57",
          "add": 0,
          "move": 1
        },
        {
          "destination": "87",
          "add": 0,
          "move": 2
        }
      ],
      "38": [
        {
          "destination": "28",
          "add": 0,
          "move": 1
        },
        {
          "destination": "58",
          "add": 0,
          "move": 1
        },
        {
          "destination": "88",
          "add": 0,
          "move": 2
        }
      ],
      "39": [
        {
          "destination": "29",
          "add": 0,
          "move": 1
        },
        {
          "destination": "59",
          "add": 0,
          "move": 1
        },
        {
          "destination": "89",
          "add": 0,
          "move": 2
        }
      ],
      "40": [
        {
          "destination": "10",
          "add": -2,
          "move": 0
        },
        {
          "destination": "70",
          "add": -1,
          "move": 1
        }
      ],
      "41": [
        {
          "destination": "11",
          "add": -2,
          "move": 0
        },
        {
          "destination": "71",
          "add": -1,
          "move": 1
        }
      ],
      "42": [
        {
          "destination": "12",
          "add": -2,
          "move": 0
        },
        {
          "destination": "72",
          "add": -1,
          "move": 1
        }
      ],
      "43": [
        {
          "destination": "13",
          "add": -2,
          "move": 0
        },
        {
          "destination": "73",
          "add": -1,
          "move": 1
        }
      ],
      "44": [
        {
          "destination": "14",
          "add": -2,
          "move": 0
        },
        {
          "destination": "74",
          "add": -1,
          "move": 1
        }
      ],
      "45": [
        {
          "destination": "15",
          "add": -2,
          "move": 0
        },
        {
          "destination": "75",
          "add": -1,
          "move": 1
        }
      ],
      "46": [
        {
          "destination": "16",
          "add": -2,
          "move": 0
        },
        {
          "destination": "76",
          "add": -1,
          "move": 1
        }
      ],
      "47": [
        {
          "destination": "17",
          "add": -2,
          "move": 0
        },
        {
          "destination": "77",
          "add": -1,
          "move": 1
        }
      ],
      "48": [
        {
          "destination": "18",
          "add": -2,
          "move": 0
        },
        {
          "destination": "78",
          "add": -1,
          "move": 1
        }
      ],
      "49": [
        {
          "destination": "19",
          "add": -2,
          "move": 0
        },
        {
          "destination": "79",
          "add": -1,
          "move": 1
        }
      ],
      "50": [
        {
          "destination": "00",
          "add": 1,
          "move": 1
        },
        {
          "destination": "30",
          "add": 0,
          "move": 1
        },
        {
          "destination": "40",
          "add": -1,
          "move": 1
        },
        {
          "destination": "20",
          "add": 0,
          "move": 2
        }
      ],
      "51": [
        {
          "destination": "01",
          "add": 1,
          "move": 1
        },
        {
          "destination": "31",
          "add": 0,
          "move": 1
        },
        {
          "destination": "41",
          "add": -1,
          "move": 1
        },
        {
          "destination": "21",
          "add": 0,
          "move": 2
        }
      ],
      "52": [
        {
          "destination": "02",
          "add": 1,
          "move": 1
        },
        {
          "destination": "32",
          "add": 0,
          "move": 1
        },
        {
          "destination": "42",
          "add": -1,
          "move": 1
        },
        {
          "destination": "22",
          "add": 0,
          "move": 2
        }
      ],
      "53": [
        {
          "destination": "03",
          "add": 1,
          "move": 1
        },
        {
          "destination": "43",
          "add": -1,
          "move": 1
        },
        {
          "destination": "33",
          "add": 0,
          "move": 1
        },
        {
          "destination": "23",
          "add": 0,
          "move": 2
        }
      ],
      "54": [
        {
          "destination": "04",
          "add": 1,
          "move": 1
        },
        {
          "destination": "44",
          "add": -1,
          "move": 1
        },
        {
          "destination": "34",
          "add": 0,
          "move": 1
        },
        {
          "destination": "24",
          "add": 0,
          "move": 2
        }
      ],
      "55": [
        {
          "destination": "05",
          "add": 1,
          "move": 1
        },
        {
          "destination": "35",
          "add": 0,
          "move": 1
        },
        {
          "destination": "45",
          "add": -1,
          "move": 1
        },
        {
          "destination": "25",
          "add": 0,
          "move": 2
        }
      ],
      "56": [
        {
          "destination": "05",
          "add": 1,
          "move": 1
        },
        {
          "destination": "46",
          "add": -1,
          "move": 1
        },
        {
          "destination": "36",
          "add": 0,
          "move": 1
        },
        {
          "destination": "26",
          "add": 0,
          "move": 2
        }
      ],
      "57": [
        {
          "destination": "07",
          "add": 1,
          "move": 1
        },
        {
          "destination": "47",
          "add": -1,
          "move": 1
        },
        {
          "destination": "37",
          "add": 0,
          "move": 1
        },
        {
          "destination": "27",
          "add": 0,
          "move": 2
        }
      ],
      "58": [
        {
          "destination": "08",
          "add": 1,
          "move": 1
        },
        {
          "destination": "48",
          "add": -1,
          "move": 1
        },
        {
          "destination": "38",
          "add": 0,
          "move": 1
        },
        {
          "destination": "28",
          "add": 0,
          "move": 2
        }
      ],
      "59": [
        {
          "destination": "09",
          "add": 1,
          "move": 1
        },
        {
          "destination": "39",
          "add": 0,
          "move": 1
        },
        {
          "destination": "49",
          "add": -1,
          "move": 1
        },
        {
          "destination": "29",
          "add": 0,
          "move": 2
        }
      ],
      "60": [
        {
          "destination": "00",
          "add": 0,
          "move": 1
        },
        {
          "destination": "50",
          "add": -1,
          "move": 0
        },
        {
          "destination": "30",
          "add": -1,
          "move": 1
        },
        {
          "destination": "20",
          "add": -1,
          "move": 1
        },
        {
          "destination": "80",
          "add": 1,
          "move": 0
        },
        {
          "destination": "90",
          "add": 0,
          "move": 1
        }
      ],
      "61": [
        {
          "destination": "01",
          "add": 0,
          "move": 1
        },
        {
          "destination": "51",
          "add": -1,
          "move": 0
        },
        {
          "destination": "21",
          "add": -1,
          "move": 1
        },
        {
          "destination": "31",
          "add": -1,
          "move": 1
        },
        {
          "destination": "81",
          "add": 1,
          "move": 0
        },
        {
          "destination": "91",
          "add": 0,
          "move": 1
        }
      ],
      "62": [
        {
          "destination": "02",
          "add": 0,
          "move": 1
        },
        {
          "destination": "52",
          "add": -1,
          "move": 0
        },
        {
          "destination": "22",
          "add": -1,
          "move": 1
        },
        {
          "destination": "32",
          "add": -1,
          "move": 1
        },
        {
          "destination": "82",
          "add": 1,
          "move": 0
        },
        {
          "destination": "92",
          "add": 0,
          "move": 1
        }
      ],
      "63": [
        {
          "destination": "03",
          "add": 0,
          "move": 1
        },
        {
          "destination": "23",
          "add": -1,
          "move": 1
        },
        {
          "destination": "53",
          "add": -1,
          "move": 0
        },
        {
          "destination": "33",
          "add": -1,
          "move": 1
        },
        {
          "destination": "83",
          "add": 1,
          "move": 0
        },
        {
          "destination": "93",
          "add": 0,
          "move": 1
        }
      ],
      "64": [
        {
          "destination": "04",
          "add": 0,
          "move": 1
        },
        {
          "destination": "54",
          "add": -1,
          "move": 0
        },
        {
          "destination": "24",
          "add": -1,
          "move": 1
        },
        {
          "destination": "34",
          "add": -1,
          "move": 1
        },
        {
          "destination": "84",
          "add": 1,
          "move": 0
        },
        {
          "destination": "94",
          "add": 0,
          "move": 1
        }
      ],
      "65": [
        {
          "destination": "05",
          "add": 0,
          "move": 1
        },
        {
          "destination": "55",
          "add": -1,
          "move": 0
        },
        {
          "destination": "25",
          "add": -1,
          "move": 1
        },
        {
          "destination": "35",
          "add": -1,
          "move": 1
        },
        {
          "destination": "85",
          "add": 1,
          "move": 0
        },
        {
          "destination": "95",
          "add": 0,
          "move": 1
        }
      ],
      "66": [
        {
          "destination": "06",
          "add": 0,
          "move": 1
        },
        {
          "destination": "56",
          "add": -1,
          "move": 0
        },
        {
          "destination": "26",
          "add": -1,
          "move": 1
        },
        {
          "destination": "36",
          "add": -1,
          "move": 1
        },
        {
          "destination": "86",
          "add": 1,
          "move": 0
        },
        {
          "destination": "96",
          "add": 0,
          "move": 1
        }
      ],
      "67": [
        {
          "destination": "07",
          "add": 0,
          "move": 1
        },
        {
          "destination": "57",
          "add": -1,
          "move": 0
        },
        {
          "destination": "27",
          "add": -1,
          "move": 1
        },
        {
          "destination": "37",
          "add": -1,
          "move": 1
        },
        {
          "destination": "87",
          "add": 1,
          "move": 0
        },
        {
          "destination": "97",
          "add": 0,
          "move": 1
        }
      ],
      "68": [
        {
          "destination": "08",
          "add": 0,
          "move": 1
        },
        {
          "destination": "58",
          "add": -1,
          "move": 0
        },
        {
          "destination": "28",
          "add": -1,
          "move": 1
        },
        {
          "destination": "38",
          "add": -1,
          "move": 1
        },
        {
          "destination": "88",
          "add": 1,
          "move": 0
        },
        {
          "destination": "98",
          "add": 0,
          "move": 1
        }
      ],
      "69": [
        {
          "destination": "09",
          "add": 0,
          "move": 1
        },
        {
          "destination": "59",
          "add": -1,
          "move": 0
        },
        {
          "destination": "29",
          "add": -1,
          "move": 1
        },
        {
          "destination": "39",
          "add": -1,
          "move": 1
        },
        {
          "destination": "89",
          "add": 1,
          "move": 0
        },
        {
          "destination": "99",
          "add": 0,
          "move": 1
        }
      ],
      "70": [
        {
          "destination": "10",
          "add": -1,
          "move": 0
        },
        {
          "destination": "30",
          "add": 2,
          "move": 0
        }
      ],
      "71": [
        {
          "destination": "11",
          "add": -1,
          "move": 0
        },
        {
          "destination": "31",
          "add": 2,
          "move": 0
        }
      ],
      "72": [
        {
          "destination": "12",
          "add": -1,
          "move": 0
        },
        {
          "destination": "32",
          "add": 2,
          "move": 0
        }
      ],
      "73": [
        {
          "destination": "13",
          "add": -1,
          "move": 0
        },
        {
          "destination": "33",
          "add": 2,
          "move": 0
        }
      ],
      "74": [
        {
          "destination": "14",
          "add": -1,
          "move": 0
        },
        {
          "destination": "34",
          "add": 2,
          "move": 0
        }
      ],
      "75": [
        {
          "destination": "15",
          "add": -1,
          "move": 0
        },
        {
          "destination": "35",
          "add": 2,
          "move": 0
        }
      ],
      "76": [
        {
          "destination": "16",
          "add": -1,
          "move": 0
        },
        {
          "destination": "36",
          "add": 2,
          "move": 0
        }
      ],
      "77": [
        {
          "destination": "17",
          "add": -1,
          "move": 0
        },
        {
          "destination": "37",
          "add": 2,
          "move": 0
        }
      ],
      "78": [
        {
          "destination": "18",
          "add": -1,
          "move": 0
        },
        {
          "destination": "38",
          "add": 2,
          "move": 0
        }
      ],
      "79": [
        {
          "destination": "19",
          "add": -1,
          "move": 0
        },
        {
          "destination": "39",
          "add": 2,
          "move": 0
        }
      ],
      "80": [
        {
          "destination": "00",
          "add": -1,
          "move": 0
        },
        {
          "destination": "30",
          "add": -2,
          "move": 0
        },
        {
          "destination": "20",
          "add": -2,
          "move": 0
        },
        {
          "destination": "50",
          "add": -2,
          "move": 0
        },
        {
          "destination": "60",
          "add": -1,
          "move": 0
        },
        {
          "destination": "90",
          "add": -1,
          "move": 0
        }
      ],
      "81": [
        {
          "destination": "01",
          "add": -1,
          "move": 0
        },
        {
          "destination": "31",
          "add": -2,
          "move": 0
        },
        {
          "destination": "21",
          "add": -2,
          "move": 0
        },
        {
          "destination": "51",
          "add": -2,
          "move": 0
        },
        {
          "destination": "61",
          "add": -1,
          "move": 0
        },
        {
          "destination": "91",
          "add": -1,
          "move": 0
        }
      ],
      "82": [
        {
          "destination": "02",
          "add": -1,
          "move": 0
        },
        {
          "destination": "32",
          "add": -2,
          "move": 0
        },
        {
          "destination": "22",
          "add": -2,
          "move": 1
        },
        {
          "destination": "52",
          "add": -2,
          "move": 0
        },
        {
          "destination": "62",
          "add": -1,
          "move": 0
        },
        {
          "destination": "92",
          "add": -1,
          "move": 0
        },
        {
          "destination": "22",
          "add": -2,
          "move": 1
        }
      ],
      "83": [
        {
          "destination": "03",
          "add": -1,
          "move": 0
        },
        {
          "destination": "33",
          "add": -2,
          "move": 0
        },
        {
          "destination": "23",
          "add": -2,
          "move": 1
        },
        {
          "destination": "53",
          "add": -2,
          "move": 0
        },
        {
          "destination": "63",
          "add": -1,
          "move": 0
        },
        {
          "destination": "93",
          "add": -1,
          "move": 0
        },
        {
          "destination": "23",
          "add": -2,
          "move": 1
        }
      ],
      "84": [
        {
          "destination": "04",
          "add": -1,
          "move": 0
        },
        {
          "destination": "34",
          "add": -2,
          "move": 0
        },
        {
          "destination": "24",
          "add": -2,
          "move": 0
        },
        {
          "destination": "54",
          "add": -2,
          "move": 0
        },
        {
          "destination": "64",
          "add": -1,
          "move": 0
        },
        {
          "destination": "94",
          "add": -1,
          "move": 0
        }
      ],
      "85": [
        {
          "destination": "05",
          "add": -1,
          "move": 0
        },
        {
          "destination": "35",
          "add": -2,
          "move": 0
        },
        {
          "destination": "25",
          "add": -2,
          "move": 0
        },
        {
          "destination": "55",
          "add": -2,
          "move": 0
        },
        {
          "destination": "65",
          "add": -1,
          "move": 0
        },
        {
          "destination": "95",
          "add": -1,
          "move": 0
        }
      ],
      "86": [
        {
          "destination": "06",
          "add": -1,
          "move": 0
        },
        {
          "destination": "36",
          "add": -2,
          "move": 0
        },
        {
          "destination": "26",
          "add": -2,
          "move": 0
        },
        {
          "destination": "56",
          "add": -2,
          "move": 0
        },
        {
          "destination": "66",
          "add": -1,
          "move": 0
        },
        {
          "destination": "96",
          "add": -1,
          "move": 0
        }
      ],
      "87": [
        {
          "destination": "07",
          "add": -1,
          "move": 0
        },
        {
          "destination": "37",
          "add": -2,
          "move": 0
        },
        {
          "destination": "27",
          "add": -2,
          "move": 0
        },
        {
          "destination": "57",
          "add": -2,
          "move": 0
        },
        {
          "destination": "67",
          "add": -1,
          "move": 0
        },
        {
          "destination": "97",
          "add": -1,
          "move": 0
        }
      ],
      "88": [
        {
          "destination": "08",
          "add": -1,
          "move": 0
        },
        {
          "destination": "38",
          "add": -2,
          "move": 0
        },
        {
          "destination": "28",
          "add": -2,
          "move": 0
        },
        {
          "destination": "58",
          "add": -2,
          "move": 0
        },
        {
          "destination": "68",
          "add": -1,
          "move": 0
        },
        {
          "destination": "98",
          "add": -1,
          "move": 0
        }
      ],
      "89": [
        {
          "destination": "09",
          "add": -1,
          "move": 0
        },
        {
          "destination": "39",
          "add": -2,
          "move": 0
        },
        {
          "destination": "29",
          "add": -2,
          "move": 0
        },
        {
          "destination": "59",
          "add": -2,
          "move": 0
        },
        {
          "destination": "69",
          "add": -1,
          "move": 0
        },
        {
          "destination": "99",
          "add": -1,
          "move": 0
        }
      ],
      "90": [
        {
          "destination": "00",
          "add": 0,
          "move": 1
        },
        {
          "destination": "30",
          "add": -1,
          "move": 0
        },
        {
          "destination": "20",
          "add": -1,
          "move": 1
        },
        {
          "destination": "40",
          "add": -2,
          "move": 0
        },
        {
          "destination": "50",
          "add": -1,
          "move": 0
        },
        {
          "destination": "60",
          "add": 0,
          "move": 1
        },
        {
          "destination": "80",
          "add": 1,
          "move": 0
        }
      ],
      "91": [
        {
          "destination": "01",
          "add": 0,
          "move": 1
        },
        {
          "destination": "31",
          "add": -1,
          "move": 0
        },
        {
          "destination": "21",
          "add": -1,
          "move": 1
        },
        {
          "destination": "41",
          "add": -2,
          "move": 0
        },
        {
          "destination": "51",
          "add": -1,
          "move": 0
        },
        {
          "destination": "61",
          "add": 0,
          "move": 1
        },
        {
          "destination": "81",
          "add": 1,
          "move": 0
        }
      ],
      "92": [
        {
          "destination": "02",
          "add": 0,
          "move": 1
        },
        {
          "destination": "32",
          "add": -1,
          "move": 0
        },
        {
          "destination": "22",
          "add": -1,
          "move": 1
        },
        {
          "destination": "42",
          "add": -2,
          "move": 0
        },
        {
          "destination": "52",
          "add": -1,
          "move": 0
        },
        {
          "destination": "62",
          "add": 0,
          "move": 1
        },
        {
          "destination": "82",
          "add": 1,
          "move": 0
        }
      ],
      "93": [
        {
          "destination": "03",
          "add": 0,
          "move": 1
        },
        {
          "destination": "33",
          "add": -1,
          "move": 0
        },
        {
          "destination": "23",
          "add": -1,
          "move": 1
        },
        {
          "destination": "43",
          "add": -2,
          "move": 0
        },
        {
          "destination": "53",
          "add": -1,
          "move": 0
        },
        {
          "destination": "63",
          "add": 0,
          "move": 1
        },
        {
          "destination": "83",
          "add": 1,
          "move": 0
        }
      ],
      "94": [
        {
          "destination": "04",
          "add": 0,
          "move": 1
        },
        {
          "destination": "34",
          "add": -1,
          "move": 0
        },
        {
          "destination": "24",
          "add": -1,
          "move": 1
        },
        {
          "destination": "44",
          "add": -2,
          "move": 0
        },
        {
          "destination": "54",
          "add": -1,
          "move": 0
        },
        {
          "destination": "64",
          "add": 0,
          "move": 1
        },
        {
          "destination": "84",
          "add": 1,
          "move": 0
        }
      ],
      "95": [
        {
          "destination": "05",
          "add": 0,
          "move": 1
        },
        {
          "destination": "35",
          "add": -1,
          "move": 0
        },
        {
          "destination": "25",
          "add": -1,
          "move": 1
        },
        {
          "destination": "45",
          "add": -2,
          "move": 0
        },
        {
          "destination": "55",
          "add": -1,
          "move": 0
        },
        {
          "destination": "65",
          "add": 0,
          "move": 1
        },
        {
          "destination": "85",
          "add": 1,
          "move": 0
        }
      ],
      "96": [
        {
          "destination": "06",
          "add": 0,
          "move": 1
        },
        {
          "destination": "36",
          "add": -1,
          "move": 0
        },
        {
          "destination": "26",
          "add": -1,
          "move": 1
        },
        {
          "destination": "46",
          "add": -2,
          "move": 0
        },
        {
          "destination": "56",
          "add": -1,
          "move": 0
        },
        {
          "destination": "66",
          "add": 0,
          "move": 1
        },
        {
          "destination": "86",
          "add": 1,
          "move": 0
        }
      ],
      "97": [
        {
          "destination": "07",
          "add": 0,
          "move": 1
        },
        {
          "destination": "37",
          "add": -1,
          "move": 0
        },
        {
          "destination": "27",
          "add": -1,
          "move": 1
        },
        {
          "destination": "47",
          "add": -2,
          "move": 0
        },
        {
          "destination": "57",
          "add": -1,
          "move": 0
        },
        {
          "destination": "67",
          "add": 0,
          "move": 1
        },
        {
          "destination": "87",
          "add": 1,
          "move": 0
        }
      ],
      "98": [
        {
          "destination": "08",
          "add": 0,
          "move": 1
        },
        {
          "destination": "38",
          "add": -1,
          "move": 0
        },
        {
          "destination": "28",
          "add": -1,
          "move": 1
        },
        {
          "destination": "48",
          "add": -2,
          "move": 0
        },
        {
          "destination": "58",
          "add": -1,
          "move": 0
        },
        {
          "destination": "68",
          "add": 0,
          "move": 1
        },
        {
          "destination": "88",
          "add": 1,
          "move": 0
        }
      ],
      "99": [
        {
          "destination": "09",
          "add": 0,
          "move": 1
        },
        {
          "destination": "39",
          "add": -1,
          "move": 0
        },
        {
          "destination": "29",
          "add": -1,
          "move": 1
        },
        {
          "destination": "49",
          "add": -2,
          "move": 0
        },
        {
          "destination": "59",
          "add": -1,
          "move": 0
        },
        {
          "destination": "69",
          "add": 0,
          "move": 1
        },
        {
          "destination": "89",
          "add": 1,
          "move": 0
        }
      ]
    };

    const calcConf = {
      "+": [
        {
          stcksFlting: 0,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 + numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, PLUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 / numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, DIVISION)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 === 1 && numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(null, numb2, PLUS + numb3, PLUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 + numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, MINUS + numb2, numb3, MINUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb2 > 0 && numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, MINUS + numb2, numb3, PLUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, MINUS + numb3, MINUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 === numb2 && numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, EQUAL)
        },
        {
          stcksFlting: -2,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => (numb1 > 0 && numb2 < 10 && 10*numb1 + numb2 === numb3) || (numb1 > 0 && numb2 >= 10 && 100*numb1 + numb2 === numb3),
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, MINUS + numb3, MINUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithTwoSticks(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 === numb2 && numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, EQUAL)
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 * numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, MULTIPLICATION)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 === numb2 + numb3,
          fn: (numb1, numb2, numb3) => createResponse1(numb1, numb2, numb3, PLUS)
        },
        {
          stcksFlting: -1,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 / numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, DIVISION)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 + numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, PLUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => -numb1 + numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(MINUS + numb1, numb2, numb3, PLUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 + numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, MINUS + numb3, PLUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, MINUS + numb3, MINUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => -numb1 - numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponse(MINUS + numb1, numb2, MINUS + numb3, MINUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb3 === 0 && numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: -1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: -1,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 === numb2 - numb3,
          fn: (numb1, numb2, numb3) => createResponse1(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 === numb2 + numb3,
          fn: (numb1, numb2, numb3) => createResponse1(numb1, numb2, numb3, PLUS)
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 + numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithTwoSticks(numb1, numb2, numb3, PLUS)
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => -numb1 + numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponse(MINUS + numb1, numb2, MINUS + numb3, PLUS)
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb2 > 0 && numb1 - numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, MINUS + numb2, MINUS + numb3, PLUS)
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb2 > 0 && numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, MINUS + numb2, numb3, PLUS)
        },		
        {
          stcksFlting: 0,
          movesRemaining: 0,
          allowNull: true,
          cond: (numb1, numb2, numb3) => numb1 === null && numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(null, numb2, numb3, PLUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          allowNull: true,
          cond: (numb1, numb2, numb3) => numb1 === null && numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(null, numb2, numb3, PLUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb2 >= 0 && numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, MINUS + numb2, numb3, PLUS)
        }		
      ],
      "-": [
        {
          stcksFlting: 0,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 === 1 && -numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(null, numb2, MINUS + numb3, MINUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb3 !== 0 && numb1 === numb2 / numb3,
          fn: (numb1, numb2, numb3) => createResponse1(numb1, numb2, numb3, DIVISION)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 * numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, MULTIPLICATION)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 === numb2 + numb3,
          fn: (numb1, numb2, numb3) => createResponse1(numb1, numb2, numb3, PLUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 === numb2 - numb3,
          fn: (numb1, numb2, numb3) => createResponse1(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb2 !== 0 && numb1 / numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, DIVISION)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb2 !== 0 && numb1 / numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, DIVISION)
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb3 < 0 && numb1 + numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, -numb3, PLUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 + numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, PLUS)
        },
        {
          stcksFlting: -1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => (numb2 < 10 && 10*numb1 + numb2 === numb3) || (numb2 >= 10 && 100*numb1 + numb2 === numb3),
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => -numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(MINUS + numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb3 >= 0 && numb1 - numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, MINUS + numb3, MINUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 === numb2 && numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, EQUAL)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb3 >= 0 && numb1 === numb2 - numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript1(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithTwoSticks(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 === numb2 && numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, EQUAL)
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => -numb1 + numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(MINUS + numb1, numb2,  numb3, PLUS)
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => -numb1 - numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponse(MINUS + numb1, numb2,  MINUS + numb3, MINUS)
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 + numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, MINUS + numb3, PLUS)
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 + numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, PLUS)
        }
      ],
      "x": [
        {
          stcksFlting: 0,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 * numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, MULTIPLICATION)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 === numb2 && numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, EQUAL)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 + numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, PLUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, MINUS + numb3, MINUS)
        },
        {
          stcksFlting: -1,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: -2,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => (numb2 < 10 && 10*numb1 + numb2 === numb3) || (numb2 >= 10 && 100*numb1 + numb2 === numb3),
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => -numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(MINUS + numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: -1,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => -numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb2 !== 0 && numb1 / numb2 === numb3,
          fn: (numb1, numb2, numb3) => [createResponseWithTwoSticks(numb1, numb2, numb3, DIVISION)]
        },
        {
          stcksFlting: -1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb2 !== 0 && numb1 / numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, DIVISION)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 * numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, MULTIPLICATION)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => (numb1 === 0 || numb2 === 0) && numb3 === 0,
          fn: (numb1, numb2, numb3) => [createResponse(numb1, MINUS + numb2, numb3, MULTIPLICATION), createResponse(numb1, numb2, MINUS + numb3, MULTIPLICATION), createResponse(MINUS + numb1, numb2, numb3, MULTIPLICATION)]
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb2 !== 0 && numb1 / numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, DIVISION)
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb2 !== 0 && numb1 / numb2 === numb3,
          fn: (numb1, numb2, numb3) => [createResponse(numb1, MINUS + numb2, numb3, DIVISION), createResponse(numb1, numb2, MINUS + numb3, DIVISION), createResponse(MINUS + numb1, numb2, numb3, DIVISION)]
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 * numb2 === numb3,
          fn: (numb1, numb2, numb3) => [createResponseWithTwoSticks(numb1, numb2, numb3, MULTIPLICATION), createResponse(MINUS + numb1, numb2, MINUS + numb3, MULTIPLICATION), createResponse(MINUS + numb1, MINUS + numb2, numb3, MULTIPLICATION), createResponse(numb1, MINUS + numb2, MINUS + numb3, MULTIPLICATION)]
          // fn: (numb1, numb2, numb3) => [createResponse(numb1, numb2, PLUS + numb3, MULTIPLICATION), createResponse(PLUS + numb1, numb2, numb3, MULTIPLICATION), createResponse(numb1, PLUS + numb2, numb3, MULTIPLICATION), createResponse(MINUS + numb1, numb2, MINUS + numb3, MULTIPLICATION), createResponse(MINUS + numb1, MINUS + numb2, numb3, MULTIPLICATION), createResponse(numb1, MINUS + numb2, MINUS + numb3, MULTIPLICATION)]
        }
      ],
      "/": [
        {
          stcksFlting: 0,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb2 !== 0 && numb1 / numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, DIVISION)
        },
        {
          stcksFlting: 0,
          movesRemaining: 2,
          cond: (numb1, numb2, numb3) => numb1 === numb2 - numb3,
          fn: (numb1, numb2, numb3) => createResponse1(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 === numb2 && numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, EQUAL)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb3 >= 0 && numb1 - numb2 === -numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, MINUS + numb3, MINUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 >= 0 && -numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(MINUS + numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb2 !== 0 && numb1 / numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, DIVISION)
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 1,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 * numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, MULTIPLICATION)
        },
        {
          stcksFlting: -1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => (numb2 < 10 && 10*numb1 + numb2 === numb3) || (numb2 >= 10 && 100*numb1 + numb2 === numb3),
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3)
        },
        {
          stcksFlting: 1,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 + numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, PLUS)
        },
        {
          stcksFlting: 0,
          movesRemaining: 1,
          cond: (numb1, numb2, numb3) => numb1 - numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponse(numb1, numb2, numb3, MINUS)
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb2 !== 0 && numb1 / numb2 === numb3,
          fn: (numb1, numb2, numb3) => [createResponseWithTwoSticks(numb1, numb2, numb3, DIVISION), createResponse(MINUS + numb1, numb2, MINUS + numb3, DIVISION), createResponse(MINUS + numb1, MINUS + numb2, numb3, DIVISION), createResponse(numb1, MINUS + numb2, MINUS + numb3, DIVISION)]
        },
        {
          stcksFlting: 2,
          movesRemaining: 0,
          cond: (numb1, numb2, numb3) => numb1 * numb2 === numb3,
          fn: (numb1, numb2, numb3) => createResponseWithSuperscript(numb1, numb2, numb3, MULTIPLICATION)
        }
      ]
    };

    const confSigns = {
      "null": [
        {
          "destination": "+",
          "add": 2,
          "move": 0
        },
        {
          "destination": "-",
          "add": 1,
          "move": 0
        },
        {
          "destination": "/",
          "add": 1,
          "move": 0
        },
        {
          "destination": "x",
          "add": 2,
          "move": 0
        },
        {
          "destination": null,
          "add": 0,
          "move": 0
        }
      ],
      "+": [
        {
          "destination": "+",
          "add": 0,
          "move": 0
        },
        {
          "destination": "-",
          "add": -1,
          "move": 0
        },
        {
          "destination": "/",
          "add": -1,
          "move": 1
        },
        {
          "destination": "x",
          "add": 0,
          "move": 2
        },
        {
          "destination": "=",
          "add": 0,
          "move": 1
        }
      ],
      "-": [
        {
          "destination": "-",
          "add": 0,
          "move": 0
        },
        {
          "destination": "+",
          "add": 1,
          "move": 0
        },
        {
          "destination": "/",
          "add": 0,
          "move": 1
        },
        {
          "destination": "x",
          "add": 1,
          "move": 1
        },
        {
          "destination": "=",
          "add": 1,
          "move": 0
        },
        {
          "destination": null,
          "add": -1,
          "move": 0
        }
      ],
      "x": [
        {
          "destination": "x",
          "add": 0,
          "move": 0
        },
        {
          "destination": "+",
          "add": 0,
          "move": 2
        },
        {
          "destination": "/",
          "add": -1,
          "move": 0
        },
        {
          "destination": "-",
          "add": -1,
          "move": 1
        },
        {
          "destination": "=",
          "add": 0,
          "move": 2
        },
        {
          "destination": null,
          "add": -2,
          "move": 0
        }
      ],
      "/": [
        {
          "destination": "/",
          "add": 0,
          "move": 0
        },
        {
          "destination": "+",
          "add": 1,
          "move": 1
        },
        {
          "destination": "-",
          "add": 0,
          "move": 1
        },
        {
          "destination": "x",
          "add": 1,
          "move": 0
        },
        {
          "destination": "=",
          "add": 1,
          "move": 1
        },
        {
          "destination": null,
          "add": -1,
          "move": 0
        }
      ],
      "=": [
        {
          "destination": "=",
          "add": 0,
          "move": 0
        },
        {
          "destination": "+",
          "add": 0,
          "move": 1
        },
        {
          "destination": "-",
          "add": -1,
          "move": 0
        },
        {
          "destination": "x",
          "add": 0,
          "move": 2
        },
        {
          "destination": null,
          "add": -2,
          "move": 0
        }		
      ]
    };

    window.onload = function () {
      addIdentityAll(conf);
      for (let i = 1; i < 100; i++) {
        conf = addToConfiguration(conf, i);
      }

      addIdentityAll(conf);
      addToConfigurationFlipDigits(conf);
      addToConfigurationOne(conf);
      addToConfigurationSeven(conf);
      addCompositMapping(conf);
      addToConfigurationNumbersWithOne(conf);
	  addReverseConfiguration(conf);
	  //console.log(JSON.stringify(conf["85"]));
    };

    function solvePuzzle() {
      const text = document.getElementById('textbox').value;
      const sticksToMove = parseInt(document.getElementById('dropdown').value);
      const output = document.getElementById('output');
      const showInstructions = document.getElementById("instructions").checked;

      output.value  = "";
      output.value  = "Solving Puzzle";
      // console.log(JSON.stringify(conf["23"]));
      // console.log(JSON.stringify(conf["29"]));
      // console.log(JSON.stringify(conf["49"]));

      let results;
      let arr = parseInput(text, EQUAL);
      // console.log(arr);

      if (arr && arr.length === 4 ) {
          results = solvePuzzleForTwo(arr, sticksToMove, showInstructions);
          for (let i = 0; i < 3; i++) {
            const inpArr = convertToArray(arr, i);
            // console.log(inpArr);
            // if (inpArr.length > 5) {
            if (inpArr !== arr) {
              const res = solvePuzzleForThree(inpArr, sticksToMove);
              // console.log(res);
              results = results.concat(res);
            }
          }
          // console.log(inpArr);
      } else {
        arr = text.match(/(\d+\.?\d*|\+|\-|x|\/|\(|\)|=)/g);
        results = solvePuzzleForThree(arr, sticksToMove);
      }
      results = results.filter((v, i, a) => a.indexOf(v) === i);
        if (results && results.length > 0) {
            // output.value = results.length > 0 ? "Found " + results.length + " Solutions:\n\n" + results.join("\n") : "No Solutions";
            output.value = "Found " + results.length + " Solutions" +  (showInstructions ? "(with instructions)" : "") + ":\n\n" + results.join("\n");
        } else {
            output.value = "No Solutions or Bad equation provided";
        }
    }

    function solvePuzzleForTwo(arr, sticksToMove, showInstructions) {
      const operation = arr && arr.length > 0 ? arr[0] : "Unknown operation";
      const result = arr[3];
      const num1 = arr[1];
      const num2 = arr[2];
      let results = [];

      // console.log(num1 + " " + num2 + " " + result);
      results = solveForTwo(num1, num2, result, operation, sticksToMove, 0, 0, showInstructions);
      if (num1 < 0) {
        // const reslts = results.concat(solveForTwo(-num1, num2, result, operation, sticksToMove, 1, 1, {num1: true}));
        const reslts = results.concat(solveForTwo(-num1, num2, result, operation, sticksToMove, 1, 1, showInstructions));
        results = results.concat(reslts.filter(value => {
          return !(results.includes(value) || value.trim().startsWith("" + num1));
        }));
      }
      if (result < 0) {
        const reslts = results.concat(solveForTwo(num1, num2, -result, operation, sticksToMove, 1, 1, showInstructions));
        results = results.concat(reslts.filter(value => {
          return !(results.includes(value) || value.trim().endsWith("" + result));
        }));
      }
      if (num1 < 0 && result < 0) {
        const reslts = results.concat(solveForTwo(-num1, num2, -result, operation, sticksToMove, 2, 2, showInstructions));
        results = results.concat(reslts.filter(value => {
          return !(results.includes(value) || value.trim().startsWith("" + num1) || value.trim().endsWith("" + result));
        }));
      }
      return results;
    }

    function solveForTwo(num1, num2, num3, operation, sticksToMove, sticksMoved, sticksFloating, showInstructions) {
      let results = [];
	  // var sticksMoved = 0, sticksFloating = 0;
      //console.log(JSON.stringify(conf["76"]));
      let conf1 = conf[Math.abs(num1)];
      let conf2 = conf[Math.abs(num2)];
      let conf3 = conf[Math.abs(num3)];

	  // console.log(num1 + " " + JSON.stringify(conf1));
	  // console.log(num2 + " " + JSON.stringify(conf2));
	  // console.log(num3  + " " + JSON.stringify(conf3));
// 	  console.log(JSON.stringify(conf["65"]));
		for (let i = 0; conf1 && i < conf1.length; i++) {
			let sticksMoved1 = sticksMoved + conf1[i].move;
			let sticksFloating1 = sticksFloating + -1 * conf1[i].add;
			if (conf1[i].add < 0) {
				sticksMoved1 += -1 * conf1[i].add;
			}
          // console.log(conf1[i].move + " " + conf1[i].add);
          // console.log(sticksFloating1 + " " + sticksMoved1 + " " + sticksToMove);
          if (Math.abs(sticksFloating1) <= sticksToMove && sticksMoved1 <= sticksToMove) {
			// console.log("This is loop iteration #" + i);
					
			for (let j = 0; conf2 && j < conf2.length; j++) { //
				var sticksMoved2 = sticksMoved1 + conf2[j].move;
				var sticksFloating2 = -1 * conf2[j].add + sticksFloating1;

				if (conf2[j].add < 0) {
					sticksMoved2 += -1 * conf2[j].add;
				}
              // console.log(sticksFloating + " " + sticksMoved + " " + sticksToMove);
              if (sticksMoved2 <= sticksToMove && Math.abs(sticksFloating2) <= sticksToMove) {
				// console.log(sticksFloating + " " + sticksMoved);
				for (let k = 0; conf3 && k < conf3.length; k++) {
					// console.log(sticksFloating + " " + sticksMoved + " " + sticksToMove + " " + conf2[j].add);
					// console.log(conf3);
					var sticksMoved3 = sticksMoved2 + conf3[k].move;
					var sticksFloating3 = sticksFloating2 + -1 * conf3[k].add;
					if (conf3[k].add < 0) {
						sticksMoved3 += -1 * conf3[k].add;
					}
					if (sticksMoved3 <= sticksToMove && Math.abs(sticksFloating3) <= sticksToMove) {
						// console.log(sticksFloating + " " + sticksMoved + " " + sticksToMove);
						//console.log(conf1[i].destination + " " + conf2[j].destination + " " + conf3[k].destination);
						//resultStr = resultStr ? resultStr : verifyAndCreateResponse(conf1[i].destination, conf2[j].destination, conf3[k].destination, operation, sticksFloating3);
                      // console.log(conf1[i]);
                      let reslt = verifyAndCreateResponse(getValueWithSign(conf1[i].destination, num1), getValueWithSign(conf2[j].destination, num2), getValueWithSign(conf3[k].destination, num3), operation, sticksFloating3, sticksToMove - sticksMoved3);
                      //console.log(reslt);
					  if (reslt) {
					    const confArr = [
                          {"number": num1, "conf": conf1[i]},
                          {"number": num2, "conf": conf2[j]},
                          {"number": num3, "conf": conf3[k]},
                        ];
                        // console.log(reslt);
                        if (reslt.length > 0) {
                          // console.log(num1 + " " + num2 + " " + num3);
                          if (showInstructions)
                            reslt = reslt.map(rs => rs + " " + createResponseDesc(confArr));
                          reslt = reslt.filter((value, indx, self) => self.indexOf(value) === indx);
                          reslt = reslt.filter((value, indx, self) => results.indexOf(value) < 0);
                          results = results.concat(reslt);
                            // results = results.concat(reslt.filter(it => !results.includes(it)));
                        }
						// console.log(results);
                      }
					}
				}
			}
			}
		}
		}
		return results;
    }

    function solvePuzzleForThree(input, sticksToMove, numMatchsticks, stcksFloating) {
      // console.log(input);
      let sticksMoved = 0; sticksFloating = 0;
      const results = [];

      const confArr = [];

      for (let i = 0; i < input.length; i++) {
        confArr.push(getConf(input[i], sticksToMove));
      }
      // console.log(JSON.stringify(confArr[0]));

      let total = 1;
      for (let idx = 0; idx < confArr.length; idx++) {
        // console.log(idx, confArr[idx]);
        total *= confArr[idx].length;
      }

      // const total = N1 * N2 * N3 * N4 * N5 * N6 * N7;
      const N1 = confArr[0].length;
      const N2 = confArr[1].length;
      const N3 = confArr[2].length;
      const N4 = confArr[3].length;
      const N5 = confArr[4].length;
      const N6 = confArr[5].length;
      const N7 = confArr[6].length;

      const arraysEqual = (a, b) =>
              a === b || (Array.isArray(a) && Array.isArray(b) && a.length === b.length && a.every((v, i) => v === b[i]));

      for (let idx = 0; idx < total; idx++) {
        let prevRrunningInput = [];
        const runningInput = [];

        const i1 = Math.floor(idx / (N2*N3*N4*N5*N6*N7)) % N1;
        const i2 = Math.floor(idx / (N3*N4*N5*N6*N7)) % N2;
        const i3 = Math.floor(idx / (N4*N5*N6*N7)) % N3;
        const i4 = Math.floor(idx / (N5*N6*N7)) % N4;
        const i5 = Math.floor(idx / (N6*N7)) % N5;
        const i6 = Math.floor(idx / (N7)) % N6;
        const i7 = idx % N7;

        // console.log(i1, N1);

        // console.log("1st calcSticksMoved");
        let obj = calcSticksMoved(confArr, 0, i1, 0, 0);
        let sticksMoved = obj.sticksMoved;
        let sticksFloating = obj.sticksFloating;
        runningInput.push(obj.value);
        if (sticksMoved > sticksToMove || Math.abs(sticksFloating) > sticksToMove) {
          continue;
        }

        // console.log("2nd calcSticksMoved");
        obj = calcSticksMoved(confArr, 1, i2, sticksMoved, sticksFloating);
        sticksMoved = obj.sticksMoved;
        sticksFloating = obj.sticksFloating;
        // console.log(i2, obj.value);
        runningInput.push(obj.value);
        if (sticksMoved > sticksToMove || Math.abs(sticksFloating) > sticksToMove) {
          continue;
        }

        obj = calcSticksMoved(confArr, 2, i3, sticksMoved, sticksFloating);
        sticksMoved = obj.sticksMoved;
        sticksFloating = obj.sticksFloating;
        runningInput.push(obj.value);
        if (sticksMoved > sticksToMove || Math.abs(sticksFloating) > sticksToMove) {
          continue;
        }

        obj = calcSticksMoved(confArr, 3, i4, sticksMoved, sticksFloating);
        sticksMoved = obj.sticksMoved;
        sticksFloating = obj.sticksFloating;
        runningInput.push(obj.value);
        if (sticksMoved > sticksToMove || Math.abs(sticksFloating) > sticksToMove) {
          continue;
        }

        obj = calcSticksMoved(confArr, 4, i5, sticksMoved, sticksFloating);
        sticksMoved = obj.sticksMoved;
        sticksFloating = obj.sticksFloating;
        runningInput.push(obj.value);
        if (sticksMoved > sticksToMove || Math.abs(sticksFloating) > sticksToMove) {
          continue;
        }

        obj = calcSticksMoved(confArr, 5, i6, sticksMoved, sticksFloating);
        sticksMoved = obj.sticksMoved;
        sticksFloating = obj.sticksFloating;
        runningInput.push(obj.value);
        if (sticksMoved > sticksToMove || Math.abs(sticksFloating) > sticksToMove) {
          continue;
        }

        obj = calcSticksMoved(confArr, 6, i7, sticksMoved, sticksFloating);
        sticksMoved = obj.sticksMoved;
        sticksFloating = obj.sticksFloating;
        runningInput.push(obj.value);
        if (sticksMoved > sticksToMove || Math.abs(sticksFloating) > sticksToMove) {
          continue;
        }
        // console.log("Last calcSticksMoved");

        // console.log(runningInput);
        if (runningInput.indexOf(EQUAL) > 0 && !arraysEqual(prevRrunningInput, runningInput) && sticksMoved === sticksToMove && sticksFloating >= 0) {
          // console.log(sticksFloating, runningInput);
          // console.log(total, idx);
          //   results = results.concat(processOutput(runningInput, sticksFloating, results));
          //   const rslt = processOutput(runningInput, sticksFloating, results);

          processInput(runningInput, sticksFloating, results);
          prevRrunningInput = runningInput;
          // console.log(results);
          // results = results.concat(rslt ? rslt : []);
        }
      }
      return results;
    }


    function processInput(runningInput, sticksFloating, results) {
      let runInput = splitArr(runningInput);
      // console.log(runInput);
      if (runInput.length < 2) return [];
      let val;

      // console.log(runInput);
      runInput = runInput.map(inp => removeNulls(inp));
      // console.log(runInput);

      if (verifyResults(runInput)) {
          // console.log(runInput);
          buildResponse(runInput, sticksFloating, results);
      }

      if (sticksFloating === 1) {
        // console.log(runInput);
        for (let idx = 0; idx < runInput.length; idx++) {
          for (let jdx = 0; jdx < runInput[idx].length; jdx++) {
            if (isNumber(runInput[idx][jdx])) {
              const oldInput = runInput[idx][jdx];
              runInput[idx][jdx] = MINUS + runInput[idx][jdx];
              if (verifyResults(runInput)) {
                  // console.log(runInput);
                  buildResponse(runInput, 0, results);
              }
              runInput[idx][jdx] = oldInput;
            }
          }
        }
      }

      if (sticksFloating === 2) {
        // console.log(runInput);
        for (let idx1 = 0; idx1 < runInput.length; idx1++) {
          for (let jdx1 = 0; jdx1 < runInput[idx1].length; jdx1++) {
            if (isNumber(runInput[idx1][jdx1])) {
              const oldInput = runInput[idx1][jdx1];
              runInput[idx1][jdx1] = PLUS + runInput[idx1][jdx1];
              if (verifyResults(runInput)) buildResponse(runInput, 0, results);

              runInput[idx1][jdx1] = MINUS + runInput[idx1][jdx1];
              if (verifyResults(runInput)) buildResponse(runInput, 1, results);
              runInput[idx1][jdx1] = oldInput;
            }
            for (let idx2 = idx1; idx2 < runInput.length; idx2++) {
              const start = idx2 > idx1 ? 0 : jdx1 + 1;
              for (let jdx2 = start; jdx2 < runInput[idx2].length; jdx2++) {
                if (isNumber(runInput[idx1][jdx1]) && isNumber(runInput[idx2][jdx2])) {
                  const oldInput1 = runInput[idx1][jdx1];
                  const oldInput2 = runInput[idx2][jdx2];
                  runInput[idx1][jdx1] = MINUS + runInput[idx1][jdx1];
                  runInput[idx2][jdx2] = MINUS + runInput[idx2][jdx2];
                  if (verifyResults(runInput)) buildResponse(runInput, 0, results);
                  runInput[idx1][jdx1] = oldInput1;
                  runInput[idx2][jdx2] = oldInput2;
                }
              }
            }
          }
        }
      }
    }

    function removeNulls(arr) {
      let nullFound = false;
      const retArr = [];
      for (let idx = 0; idx < arr.length; idx++) {
        if (nullFound && arr[idx] !== null && isNumber(retArr[retArr.length -1]) && isNumber(arr[idx])) {
          retArr[retArr.length -1] += arr[idx];
          nullFound = false;
        } else if (arr[idx] !== null) {
          retArr.push(arr[idx])
        } else {
          nullFound = true;
        }
      }
      return retArr;
    }

    function splitArr(runningInput) {
      const runInput = [];
      let start = 0, end = 0, eqIdx = 0;
      while (eqIdx >= 0) {
        eqIdx = runningInput.indexOf("=", start);
        end = eqIdx;
        // console.log(start, end);
        // console.log(runningInput.slice(start, end));
        if (eqIdx >= 0) {
          runInput.push(runningInput.slice(start, end));
          start = end + 1;
        } else {
          runInput.push(runningInput.slice(start));
        }
      }
      return runInput;
    }


    function buildResponse(runInput, sticksFloating, results) {
      //console.log(sticksFloating, runInput);
      if (sticksFloating === 0) {
        addToResults(runInput, results);
      }
      if (sticksFloating === 1) {
        for (let idx = 0; idx < runInput.length; idx++) {
          for (let jdx = 0; jdx < runInput[idx].length; jdx++) {
            if (isNumber(runInput[idx][jdx])) {
              const val = runInput[idx][jdx];
              runInput[idx][jdx] += SUPERSCRIPT1;
              addToResults(runInput, results);
              runInput[idx][jdx] = val;
            }
          }
        }
      }

      if (sticksFloating === 2) {
        // console.log(runInput);
        buildResponseWithTwoSticks(runInput, results);
      }
    }


    function buildResponseWithTwoSticks(runInput, results) {
      for (let idx1 = 0; idx1 < runInput.length; idx1++) {
        for (let jdx1 = 0; jdx1 < runInput[idx1].length; jdx1++) {
          if (isNumber(runInput[idx1][jdx1])) {
            const oldInput = runInput[idx1][jdx1];
            runInput[idx1][jdx1] = PLUS + runInput[idx1][jdx1];
            addToResults(runInput, results);
            runInput[idx1][jdx1] = oldInput;
            if (runInput[idx1][jdx1] === "0" || runInput[idx1][jdx1] === "1") {
              runInput[idx1][jdx1] = runInput[idx1][jdx1] + SUPERSCRIPT1 + SUPERSCRIPT1;
              addToResults(runInput, results);
              runInput[idx1][jdx1] = oldInput;
            }
          }
          for (let idx2 = idx1; idx2 < runInput.length; idx2++) {
            const start = idx2 > idx1 ? 0 : jdx1 + 1;
            for (let jdx2 = start; jdx2 < runInput[idx2].length; jdx2++) {
              if (isNumber(runInput[idx1][jdx1]) && isNumber(runInput[idx2][jdx2])) {
                const oldInput1 = runInput[idx1][jdx1];
                const oldInput2 = runInput[idx2][jdx2];
                runInput[idx1][jdx1] += SUPERSCRIPT1;
                runInput[idx2][jdx2] += SUPERSCRIPT1;
                addToResults(runInput, results);
                runInput[idx1][jdx1] = oldInput1;
                runInput[idx2][jdx2] = oldInput2;
              }
            }
          }
        }
      }
      return results;
    }
    
    function verifyResults(runInput) {
      const resArr = runInput.map(inp => evalRPN(toRPN(inp)));
      // console.log(resArr);
      return resArr.every(v => resArr[0] !== undefined && v === resArr[0]);
    }

    function calcSticksMoved(confArr, num, indx, sticksMvd, sticksFlting) {
      // console.log(confArr[num]);
      // console.log(confArr[num][indx]);
      if (confArr[num][indx] === undefined) {
        // console.log(num, indx, confArr[num]);
        // console.log(num, indx);
        return {};
      }
      let sticksMoved = sticksMvd + confArr[num][indx].move;
      let sticksFloating = sticksFlting + -1 * confArr[num][indx].add;
      if (confArr[num][indx].add < 0) {
        sticksMoved += -1 * confArr[num][indx].add;
      }
      return {sticksFloating: sticksFloating, sticksMoved: sticksMoved, value: confArr[num][indx].destination};
    }

    function addToResults(runInput, results) {
      const result = createResp(runInput);
      if (!results.includes(result)) {
        results.push(result);
      }
    }

    function createResp(runInput) {
      const respArr = runInput.map(inp => inp.join(SPACE));
      return respArr.join(SPACE + EQUAL + SPACE);
    }

    function parseInput(str, delim) {
        const signs = [PLUS, MINUS, MULTIPLICATION, DIVISION];
		const i = str.indexOf(delim);
        const str2 = str.substring(i+1).trim();
        if (signs.find(sign => str2.indexOf(sign) > 0)) return null;
        const num3 = parseInt(str2);
        const s = str.substring(0, i).trim();
        return signs.map(sign => breakInput(s, num3, sign)).find(v => v != null);
	}

    function breakInput(str, num3, sign) {
      const j = str.indexOf(sign);
      if (j > 0 && isNumber(num3)) {
        const part1 = str.substring(0, j).trim();
        const part2 = str.substring(j+1).trim();
        return isNumber(part1) && isNumber(part2) ? [sign, parseInt(part1), parseInt(part2), num3]: null;
      }
      return null;
    }

    function isNumber(str) {
      return str !== null && (typeof str === "number" || !isNaN(Number(str)) && str.trim() !== "");
    }

    function addIdentity(arr, num) {
		const ar = [{
			"destination": num,
			"add": 0,
			"move": 0}];
		return arr ? ar.concat(arr) : ar;
	}

	function addIdentityAll(conf) {
		const ob = {
			"destination": 0,
			"add": 0,
			"move": 0
		};
        Object.keys(conf).forEach(key => {
            const obj = JSON.parse(JSON.stringify(ob));
            obj.destination = key;
            conf[key].push(obj);
        });
      }

	function verifyAndCreateResponse(numb1, numb2, numb3, op, stcksFlting, movesRemaining) {
		// console.log(numb1 + " "	 + numb2 + " " + numb3 + "  " + stcksFlting + " " + movesRemaining);
        return performOperation(op, numb1, numb2, numb3, stcksFlting, movesRemaining);
	}


	function createResponseDesc(confArr) {
      let descArr = [];
      for (const conf of confArr) {
        const cf = conf.conf;
        let desc = null;
        if (cf.move && cf.add !== 0) {
          desc = "Moved " + cf.move + " sticks and ";
          if (cf.add > 0) {
            desc += "added " + cf.add + " sticks in " + conf.number;
          } else if (cf.add < 0) {
            desc += "removed " + -cf.add + " sticks from " + conf.number;
          }
        } else if (cf.add > 0) {
          desc = "Added " + cf.add + " sticks in " + conf.number;
        } else if (cf.add < 0) {
          desc = "Removed " + -cf.add + " sticks from " + conf.number;
        } else if (cf.move) {
          desc = "Moved " + cf.move + " sticks in " + conf.number;
        }
        if (desc) descArr.push(desc);
      }
      return descArr.length ? "(" + descArr.join(".") + ")" : "";
    }
    function addToConfigurationFlipDigits(conf) {
      const ob = {
        "destination": 1,
        "add": 0,
        "move": 2
      };
      Object.keys(conf).forEach(key => {
        if ((key.startsWith(("1")) || key.endsWith(("1")))) {
          let key1;
          if (key.length === 2) {
            key1 = key[1] + key[0];
          } else if (key.length === 3) {
            key1 = key[2] + key[1] + key[0];
          }
          if (key1 && key !== key1) {
            const obj = JSON.parse(JSON.stringify(ob));
            obj.destination = key1;
            addItemToConf(conf[key], obj);
          }
        }
      });
    }

    // This handles numbers with 1e.g 111 -> 11, 14 or 41
    function addToConfigurationNumbersWithOne(conf) {
      const ob = {
        "destination": 1,
        "add": -2,
        "move": 0
      };
      Object.keys(conf).forEach(key => {
        if (key.indexOf(("1")) >= 0 ) {
          const dest = key.replace("1", "");
          if (dest) {
            const obj = JSON.parse(JSON.stringify(ob));
            obj.destination = dest;
            addItemToConf(conf[key], obj);
          }
        }
        for (let fromIndex = 0; fromIndex < key.length; fromIndex++) {
          const dest = searchForSubstringAndReplace(key, "11", "4");
          dest.forEach(dst => {
            if (dst) {
              const obj = JSON.parse(JSON.stringify(ob));
              obj.destination = dst;
              obj.move = 1;
              obj.add = 0;
              addItemToConf(conf[key], obj);
            }
            });
          }
      });
    }

    function addReverseConfiguration(conf) {
      Object.keys(conf).forEach(key => {
		const confArr = conf[key];
		for (let i = 0; i < confArr.length; i++) {
			const obj = JSON.parse(JSON.stringify(confArr[i]));
			obj.destination = key; 
			obj.move = confArr[i].move; 
			obj.add = -confArr[i].add; 
			//console.log(confArr[i].destination);
			if (conf[confArr[i].destination])
				addItemToConf(conf[confArr[i].destination], obj);
		}
	  });
	}

    function searchForSubstringAndReplace(str, searchStr, replace) {
      const result = [];
      for (let fromIndex = 0; fromIndex < str.length; fromIndex++) {
        const pos = str.indexOf(searchStr, fromIndex);
        if (pos >= 0 ) {
          const dest = str.substring(0, fromIndex) + str.substring(fromIndex, pos) + replace + str.substring(fromIndex + pos + 2);
          result.push(dest);
          // console.log(key, dest);
        }
      }
      return result;
    }

    function addToConfigurationOne(conf) {
      const ob = {
        "destination": 1,
        "add": -2,
        "move": 0
      };
      const ob2 = {
        "destination": 1,
        "add": 2,
        "move": 0
      };
      const ob3 = {
        "destination": 7,
        "add": 1,
        "move": 0
      };
      Object.keys(conf).forEach(key => {
        if ((key.startsWith(("1")) || key.endsWith(("1"))) && key.length === 2) {
          const key1 = key[1] + key[0];
		  const k0 = key[0];
		  const k1 = key[1];
            const obj = JSON.parse(JSON.stringify(ob));
            obj.destination = key.startsWith("1") ?  k1 : k0;
			addItemToConf(conf[key], obj);
            const obj2 = JSON.parse(JSON.stringify(ob2));
            obj2.destination = key.startsWith("1") ? "4" + k1 : k0 + 4;
			addItemToConf(conf[key], obj2);
            const obj3 = JSON.parse(JSON.stringify(ob3));
            obj3.destination = key.startsWith("1") ? "7" + k1 : k0 + 7;
			addItemToConf(conf[key], obj3);
          }
      });
    }

    function getValueWithSign(destination, num) {
      if (destination === null) return null;
      return num !== null && num < 0 ? -destination : destination !== null ? destination : null;
    }

    function addToConfigurationSeven(conf) {
      const ob = {
        "destination": 1,
        "add": -1,
        "move": 0
      };
      const ob2 = {
        "destination": 1,
        "add": 1,
        "move": 1
      };
      Object.keys(conf).forEach(key => {
        if ((key.startsWith(("7")) || key.endsWith(("7"))) && key.length === 2) {
          const key1 = key[1] + key[0];
          const k0 = key[0];
          const k1 = key[1];
          const obj = JSON.parse(JSON.stringify(ob));
          obj.destination = key.startsWith("7") ? "1" + k1 : k0 + 1;
          addItemToConf(conf[key], obj);
          const obj2 = JSON.parse(JSON.stringify(ob2));
          obj2.destination = key.startsWith("7") ? "4" + k1 : k0 + "4";
          addItemToConf(conf[key], obj2);
        }
      });
    }

    function convertToArray(arr, i) {
      const operation = arr[0];
      const result = arr[3];
      const num1 = arr[1];
      const num2 = arr[2];
      
      const inp = [num1, operation, num2, EQUAL, result];
      const input = [];
      let j = 0, numj = 0;
      let found = false;
      while (j < inp.length) {
        const num = inp[j];
        if (numj === i && isNumber(num) && num >= 10) {
          input.push(Math.floor(num/10));
          input.push(null);
          input.push(num%10);
          numj++;
          found = true;
        } else {
          if (isNumber(num)) numj++;
          input.push(inp[j]);
        }
        j++;
      }
      
      return found ? input : arr;
    }

    function breakInp(input) {
      return input < 10 ? [input] : [Math.floor(input / 10), null, input%10] ;
    }

    function processEqn(input) {
        let inp = [];
        let eqFound = false;
        let res = 0;
        for (let i = 0; i < input.length; i++) {
          if (input[i] === '=') {
            eqFound = true;
          } else if (!eqFound) {
            inp.push(parseInt(input[i]));
          } else {
            res = parseInt(input[i]);
          }
        }
        inp = toRPN(inp);
        if (evalRPN(inp) === res) {
          console.log(inp, res);
        }
    }

    function toRPN(tokens) {
      const out = [];
      const stack = [];
      const prec = {'+': 1, '-': 1, 'x': 2, '*': 2, '/': 2};
      tokens.forEach(token => {
        if (!isNaN(token)) {
          out.push(Number(token));
        } else if (token in prec) {
          while (
                  stack.length &&
                  prec[stack[stack.length - 1]] >= prec[token]
                  ) {
            out.push(stack.pop());
          }
          stack.push(token);
        } else if (token === '(') {
          stack.push(token);
        } else if (token === ')') {
          while (stack.length && stack[stack.length - 1] !== '(') {
            out.push(stack.pop());
          }
          stack.pop(); // pop '('
        }
      });
      while (stack.length) out.push(stack.pop());
      // console.log(out);
      return out;
    }

    function evalRPN(rpn) {
      const stack = [];
      rpn.forEach(token => {
        if (typeof token === 'number') {
          stack.push(token);
        } else {
          const b = stack.pop();
          const a = stack.pop();
          switch (token) {
            case '+': stack.push(a + b); break;
            case '-': stack.push(a - b); break;
            case '*': stack.push(a * b); break;
            case 'x': stack.push(a * b); break;
            case '/': stack.push(b === 0 ? undefined : a / b); break;
            // case '/': stack.push(b !== 0 ? a / b : -1); break;
          }
        }
      });
      return stack[0];
    }

    function addItemToConf(arr, obj) {
		const confItem = arr.find(it => it.destination === obj.destination);

		if (!confItem) arr.push(obj);
	}

    function addToConfiguration(conf, increment, debug) {
		Object.keys(conf).forEach(key => {
			// console.log(`${key}: ${conf[key]}`);
			//console.log(key);
			// const key1 = increment + parseInt(key);
			const key1 = increment + key;
			// if (!conf.hasOwnProperty(key1)) {
			// 	conf[key1] = [];
			// }
          // console.log(conf[key1]);
          if (parseInt(key) < 10) {
				//const arr = Array.from(conf[key]);
				const arr = JSON.parse(JSON.stringify(conf[key]));
              // if (key === 6) console.log(arr);
				for (let i = 0; i < conf[key].length; i++) {
					const confItem = conf[key][i];
                    // console.log(num);
                    // console.log(arr[i]);
                    // const dest = parseInt(confItem.destination);
					arr[i].destination = "" + increment + (confItem.destination !== null ? confItem.destination : "");
					if (debug) {
                        console.log(key + " " + key1 + " " + arr[i].destination);
                    }
				}
				//const arr1 = JSON.parse(JSON.stringify(arr));

					// arr.push({
					// 	destination: parseInt(key),
					// 	add: -2,
					// 	move: 0
					// });
//				for (let i = 0; i < arr.length; i++) {
//					arr1.push({
//						destination: arr[i].destination - 10,
//						add: -2,
//						move: 0
//					});					
//				}
				conf[key1] = conf.hasOwnProperty(key1) ? conf[key1].concat(arr) : arr;
			}
		});
		return conf;
	}


    function getConf(input, sticksToMove) {
      if (input === null || input === undefined) return confSigns["null"];
      const cf = isNumber(input) ? conf[input] : confSigns[input.trim()];
      const cff = [];
      cf.forEach(c => {
        if (Math.abs(c.add) <= sticksToMove && c.move <= sticksToMove) {
          const obj = cff.find(c1 => c1.destination === c.destination);
          if (obj === null || obj === undefined) cff.push(c);
        }
      });
      return cff;
    }

	function createResponse(numb1, numb2, numb3, op) {
      if (!isNumber(numb1) || numb2 === null || numb3 === null) return null;

		return op ?
                numb1 !== null ? numb1 + " " + op + " " + numb2 + " = " + numb3 : op + numb2 + " = " + numb3
                : numb1 + "" + numb2 + " = " + numb3;
	}

	function createResponse1(numb1, numb2, numb3, op) {
		return numb1 + " = " + numb2 + " " + op + " " + numb3;
	}

	function createResponseWithSuperscript (numb1, numb2, numb3, op) {
		return numb1 !== null ? [numb1 + SUPERSCRIPT1 + " " + op + " " + numb2 + " = " + numb3,
		      numb1 + " " + op + " " + numb2 + SUPERSCRIPT1 + " = " + numb3,
		      numb1 + " " + op + " " + numb2 + " = " + numb3 + SUPERSCRIPT1] :
                [op + numb2 + " = " + numb3 + SUPERSCRIPT1,
                  op + numb2 + SUPERSCRIPT1 + " = " + numb3];
	}

    function createResponseWithPrefix(numb1, numb2, numb3, op, prefix) {

    }

	function createResponseWithTwoSticks (numb1, numb2, result, op) {
      const arr = [[numb1, op, numb2], [result]];
      return buildResponseWithTwoSticks(arr, []);
	}

	function createResponseWithSuperscript1(numb1, numb2, numb3, op) {
		return [numb1 + SUPERSCRIPT1 + " = " + numb2 + " " + op + " " + numb3,
		      numb1 + " = " + numb2 + SUPERSCRIPT1 + " " + op + " " + numb3,
		      numb1 + " = " + numb2 + " " + op + " " + numb3 + SUPERSCRIPT1];
	}

    function addCompositMapping(conf) {
      Object.keys(conf).forEach(key => {
        const k = parseInt(key);
        if (k < 10) {
          addCompositMappingAddOne(conf, key, conf[key[0]]);
        }
        if (k > 10 && k < 100) {
          const k1 = parseInt(key[0]);
          const k2 = parseInt(key[1]);
          if (k2 === 1) {
            addCompositMappingOne(conf, key, conf[key[0]]);
          } if (k1 === 1) {
            addCompositMappingOne(conf, key, conf[key[1]]);
          }

            for (let i = 0; i < conf[key[0]].length; i++) {
            for (let j = 0; j < conf[key[1]].length; j++) {
              const firstConf = conf[key[0]][i];
              const secondConf = conf[key[1]][j];
              let move = firstConf.move + secondConf.move;
              const destination = (firstConf.destination !== null ? firstConf.destination : "") + (secondConf.destination !== null ? secondConf.destination : "");

              const mv =  matchMoves(firstConf.add, secondConf.add);

              const confItem = conf[key].find(it => it.destination === destination);

              if (!confItem) {
                conf[key].push({
                  destination: destination,
                  add: firstConf.add + secondConf.add,
                  move: move + mv.move
                  // 1: firstConf.destination,
                  // 2: secondConf.destination
                });
              }
            }
          }
        }
      });
      // return conf;
    }

    // This handles numbers that start with or ends with 1 e.g 51/15 and converts to single digits e.g 6
    function addCompositMappingOne(conf, key, confItem) {
      for (let i = 0; i < confItem.length; i++) {
        // const destination = parseInt("" + confItem[i].destination);
        const destination = confItem[i].destination;
		
        if (destination !== null) {
			if (confItem[i].add === 1) {
			  addToConfItems(conf[key], destination, {add: -1, move: confItem[i].move + 1});
			} if (confItem[i].add === 2) {
			  addToConfItems(conf[key], destination, {add: 0, move: confItem[i].move + 2});
			}
		}
      }
    }

    // This handles single digits numbers and pads with 1 e.g 5 to double digits e.g 51/15
    function addCompositMappingAddOne(conf, key, confItem) {
      // addToConfItems(conf[key], 10 * parseInt(key) + 1, {move: 0, add: 2});
      // addToConfItems(conf[key], 10 + parseInt(key), {move: 0, add: 2});
      addToConfItems(conf[key], key + 1, {move: 0, add: 2});   // 3 -> 31
      addToConfItems(conf[key], "1" + key, {move: 0, add: 2});  // 3 -> 13
    }

    function performOperation(oper, numb1, numb2, numb3, stcksFlting, movesRemaining) {
      let results = [];
      let num1 = numb1 === null ? null : parseInt(numb1);
      let num2 = numb2 === null ? null : parseInt(numb2);
      let num3 = numb3 === null ? null : parseInt(numb3);
      // console.log(numb1, numb2, numb3, stcksFlting, movesRemaining);
      calcConf[oper].forEach(item => {
        const numValid = item.allowNull ? numb2 !== null && numb3 !== null : numb1 !== null && numb2 !== null && numb3 !== null;
        if (numValid && item.stcksFlting === stcksFlting && item.movesRemaining === movesRemaining
              && item.cond.apply(null, [num1, num2, num3])) {
              const result = item.fn.apply(null, [numb1, numb2, numb3]);
              // console.log(item.cond.apply(null, [numb1, numb2, numb3]));
              // console.log(result);
              if (Array.isArray(result)) {
                results = results.concat(result.flat());
              } else if (result) {
                results.push(result);
              }
      }
        });
      return results;
    }

    function addToConfItems(confItems, destination, obj) {
      const confItem = confItems.find(it => it.destination === destination);
      obj.destination = destination;
      if (!confItem) confItems.push(obj);
    }


    function matchMoves(num1, num2) {
      const arr1 = fillArray(num1);
      const arr2 = fillArray(num2);
      let obj = {add: 0, move: 0};
      for (let i = 0; i < arr1.length && i < arr2.length; i++) {
          if (arr1[i] + arr2[i] === 0) {
            obj.move++;
            arr1[i] = arr2[i] = 0;
          } else {
            obj.add += arr1[i] + arr2[i];
            arr1[i] = arr2[i] = 0;
          }
      }
      for (let i = 0; i < arr1.length; i++) {
        obj.add += arr1[i];
      }
      for (let i = 0; i < arr2.length; i++) {
        obj.add += arr2[i];
      }
      return obj;
    }

    function fillArray(num) {
      const arr = [];
      for (let i = 0; i < Math.abs(num); i++) {
        arr.push(num > 0 ? 1 : -1);
      }
      return arr;
    }


    function print(low, high) {
        let obj = {};
        let ob = {
            "destination": 1,
            "add": 0,
            "move": 1
        }
        let x = 0;
        for (let i = low; i < high; i++) {
            obj[i] = [];
          const ob1 = JSON.parse(JSON.stringify(ob));
          const ii = x++;
          ob1.destination = 20 + ii;
          obj[i].push(ob1);
          const ob2 = JSON.parse(JSON.stringify(ob));
          ob2.destination = 50 + ii;
          ob2.move = 2;
          obj[i].push(ob2);
        }
        console.log(JSON.stringify(obj, null, 2));
        // console.log(JSON.stringify(conf, null, 2));
        return obj;
    }

    function copyText() {
      // const text = document.getElementById("myText").value;
      // const text = document.getElementById("myText").value;
      const text = results;
      navigator.clipboard.writeText(text)
              .then(() => {
                alert("Copied to clipboard!");
              })
              .catch(err => {
                alert("Failed to copy: " + err);
              });
    }

  </script>
</body>
</html>
